<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Agent Business Card Generator</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <style>
    :root {
      --bg: #0a0a0f;
      --surface: #12121a;
      --border: #1e1e2e;
      --text: #e0e0e0;
      --dim: #666;
      --cyan: #00f0ff;
      --purple: #a855f7;
      --green: #00ff88;
      --pink: #ff4088;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 24px;
    }
    .container { max-width: 900px; margin: 0 auto; }
    
    header { text-align: center; margin-bottom: 32px; }
    h1 { font-size: 28px; margin-bottom: 8px; }
    h1 span { background: linear-gradient(135deg, var(--cyan), var(--purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .subtitle { color: var(--dim); font-size: 14px; }
    
    /* Lookup section */
    .lookup-section {
      background: var(--surface);
      border: 1px solid var(--cyan);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
    }
    .lookup-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 12px;
      color: var(--cyan);
    }
    .lookup-row {
      display: flex;
      gap: 12px;
    }
    .lookup-row input {
      flex: 1;
      padding: 12px 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 14px;
      font-family: 'Monaco', 'Consolas', monospace;
    }
    .lookup-row input:focus {
      outline: none;
      border-color: var(--cyan);
    }
    .btn-lookup {
      padding: 12px 24px;
      background: linear-gradient(135deg, var(--cyan), var(--purple));
      border: none;
      border-radius: 8px;
      color: #000;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
    }
    .btn-lookup:hover { opacity: 0.9; }
    .lookup-status {
      margin-top: 10px;
      font-size: 13px;
      color: var(--dim);
    }
    .lookup-status.success { color: var(--green); }
    .lookup-status.error { color: var(--pink); }
    
    .main-grid {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 32px;
      align-items: start;
    }
    @media (max-width: 800px) {
      .main-grid { grid-template-columns: 1fr; }
    }
    
    .form-section {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
    }
    .form-title { font-size: 16px; font-weight: 600; margin-bottom: 20px; }
    
    .form-group { margin-bottom: 16px; }
    .form-group label {
      display: block;
      font-size: 12px;
      color: var(--dim);
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .form-group input, .form-group select, .form-group textarea {
      width: 100%;
      padding: 12px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 14px;
    }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
      outline: none;
      border-color: var(--cyan);
    }
    .form-group textarea { resize: vertical; min-height: 60px; }
    
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    
    .theme-selector {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .theme-btn {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      border: 2px solid transparent;
      cursor: pointer;
      transition: all 0.2s;
    }
    .theme-btn.active { border-color: #fff; transform: scale(1.1); }
    .theme-cyber { background: linear-gradient(135deg, #00f0ff, #a855f7); }
    .theme-neon { background: linear-gradient(135deg, #ff4088, #ff8c00); }
    .theme-matrix { background: linear-gradient(135deg, #00ff88, #004422); }
    .theme-dark { background: linear-gradient(135deg, #333, #111); }
    .theme-ocean { background: linear-gradient(135deg, #0077ff, #00ccff); }
    
    .btn-generate {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, var(--cyan), var(--purple));
      border: none;
      border-radius: 8px;
      color: #000;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 8px;
      transition: transform 0.2s;
    }
    .btn-generate:hover { transform: scale(1.02); }
    
    /* Card Preview */
    .preview-section { position: sticky; top: 24px; }
    .preview-title { font-size: 14px; color: var(--dim); margin-bottom: 12px; text-align: center; }
    
    .card-wrapper {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
    }
    
    /* The actual card - sleek professional design */
    .agent-card {
      width: 400px;
      height: 220px;
      border-radius: 20px;
      padding: 24px;
      position: relative;
      overflow: hidden;
      font-family: 'Inter', 'SF Pro Display', system-ui, sans-serif;
      box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
    }
    .agent-card.cyber {
      background: linear-gradient(145deg, #0d1117 0%, #161b22 50%, #0d1117 100%);
      border: 1px solid rgba(0,240,255,0.15);
    }
    .agent-card.neon {
      background: linear-gradient(145deg, #1a0a15 0%, #2d1a24 50%, #1a0a15 100%);
      border: 1px solid rgba(255,64,136,0.15);
    }
    .agent-card.matrix {
      background: linear-gradient(145deg, #0a120a 0%, #0d1f12 50%, #0a120a 100%);
      border: 1px solid rgba(0,255,136,0.15);
    }
    .agent-card.dark {
      background: linear-gradient(145deg, #18181b 0%, #27272a 50%, #18181b 100%);
      border: 1px solid rgba(255,255,255,0.08);
    }
    .agent-card.ocean {
      background: linear-gradient(145deg, #0c1929 0%, #132f4c 50%, #0c1929 100%);
      border: 1px solid rgba(0,119,255,0.15);
    }
    
    /* Subtle accent line at top */
    .agent-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 24px;
      right: 24px;
      height: 2px;
      border-radius: 0 0 2px 2px;
    }
    .cyber::before { background: linear-gradient(90deg, transparent, #00f0ff, transparent); }
    .neon::before { background: linear-gradient(90deg, transparent, #ff4088, transparent); }
    .matrix::before { background: linear-gradient(90deg, transparent, #00ff88, transparent); }
    .dark::before { background: linear-gradient(90deg, transparent, #fff, transparent); opacity: 0.3; }
    .ocean::before { background: linear-gradient(90deg, transparent, #0077ff, transparent); }
    
    .card-glow {
      position: absolute;
      width: 300px;
      height: 300px;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.12;
      top: -150px;
      right: -100px;
    }
    .cyber .card-glow { background: #00f0ff; }
    .neon .card-glow { background: #ff4088; }
    .matrix .card-glow { background: #00ff88; }
    .dark .card-glow { background: #888; }
    .ocean .card-glow { background: #0077ff; }
    
    /* Secondary glow */
    .card-glow-2 {
      position: absolute;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      filter: blur(60px);
      opacity: 0.08;
      bottom: -100px;
      left: -50px;
    }
    .cyber .card-glow-2 { background: #a855f7; }
    .neon .card-glow-2 { background: #ff8c00; }
    .matrix .card-glow-2 { background: #00aa55; }
    .dark .card-glow-2 { background: #444; }
    .ocean .card-glow-2 { background: #00ccff; }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      position: relative;
      z-index: 1;
    }
    .card-name {
      font-size: 22px;
      font-weight: 700;
      color: #fff;
      letter-spacing: -0.5px;
    }
    .card-type {
      font-size: 9px;
      padding: 5px 10px;
      border-radius: 6px;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
    }
    .cyber .card-type { background: rgba(0,240,255,0.12); color: #00f0ff; border: 1px solid rgba(0,240,255,0.2); }
    .neon .card-type { background: rgba(255,64,136,0.12); color: #ff4088; border: 1px solid rgba(255,64,136,0.2); }
    .matrix .card-type { background: rgba(0,255,136,0.12); color: #00ff88; border: 1px solid rgba(0,255,136,0.2); }
    .dark .card-type { background: rgba(255,255,255,0.08); color: #e0e0e0; border: 1px solid rgba(255,255,255,0.1); }
    .ocean .card-type { background: rgba(0,119,255,0.12); color: #4dabff; border: 1px solid rgba(0,119,255,0.2); }
    
    .card-wallet {
      font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
      font-size: 11px;
      color: #6b7280;
      margin-bottom: 18px;
      position: relative;
      z-index: 1;
      letter-spacing: 0.5px;
    }
    
    .card-stats {
      display: flex;
      gap: 32px;
      margin-bottom: 16px;
      position: relative;
      z-index: 1;
    }
    .stat-item {
      display: flex;
      flex-direction: column;
    }
    .stat-value {
      font-size: 24px;
      font-weight: 700;
      letter-spacing: -0.5px;
      line-height: 1;
    }
    .cyber .stat-value { color: #00f0ff; }
    .neon .stat-value { color: #ff4088; }
    .matrix .stat-value { color: #00ff88; }
    .dark .stat-value { color: #fff; }
    .ocean .stat-value { color: #4dabff; }
    .stat-label {
      font-size: 10px;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 4px;
      font-weight: 500;
    }
    
    .card-skills {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      position: relative;
      z-index: 1;
    }
    .skill-tag {
      font-size: 10px;
      padding: 4px 10px;
      border-radius: 6px;
      background: rgba(255,255,255,0.06);
      color: #9ca3af;
      border: 1px solid rgba(255,255,255,0.08);
      font-weight: 500;
    }
    
    /* QR Code - sleek design */
    .card-qr {
      position: absolute;
      bottom: 20px;
      right: 20px;
      width: 56px;
      height: 56px;
      background: #fff;
      border-radius: 10px;
      padding: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .card-qr canvas { width: 100% !important; height: 100% !important; }
    
    .card-footer {
      position: absolute;
      bottom: 10px;
      left: 24px;
      font-size: 9px;
      color: #4b5563;
      letter-spacing: 0.5px;
    }
    
    /* Download buttons */
    .download-btns {
      display: flex;
      gap: 8px;
      margin-top: 16px;
    }
    .btn-download {
      flex: 1;
      padding: 10px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-download:hover { border-color: var(--cyan); }
    
    .share-section {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid var(--border);
    }
    .share-title {
      font-size: 12px;
      color: var(--dim);
      margin-bottom: 10px;
      text-align: center;
    }
    .share-btns {
      display: flex;
      gap: 8px;
    }
    .btn-share {
      flex: 1;
      padding: 10px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 12px;
      cursor: pointer;
    }
    .btn-share:hover { border-color: var(--cyan); }
    
    footer {
      text-align: center;
      margin-top: 40px;
      color: var(--dim);
      font-size: 13px;
    }
    footer a { color: var(--cyan); text-decoration: none; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ü§ñ <span>Agent Business Card</span> Generator</h1>
      <p class="subtitle">Create shareable profile cards for AI agents</p>
    </header>

    <!-- Quick Lookup -->
    <div class="lookup-section">
      <div class="lookup-title">üîç Quick Lookup - Auto-generate from wallet</div>
      <div class="lookup-row">
        <input type="text" id="lookupWallet" placeholder="Enter wallet address (0x...)">
        <button class="btn-lookup" onclick="lookupWallet()">Generate from API</button>
      </div>
      <div class="lookup-status" id="lookupStatus"></div>
    </div>

    <div class="main-grid">
      <div class="form-section">
        <div class="form-title">Card Details</div>
        
        <div class="form-group">
          <label>Agent Name</label>
          <input type="text" id="agentName" placeholder="KEVIN-01" value="KEVIN-01">
        </div>
        
        <div class="form-group">
          <label>Wallet Address</label>
          <input type="text" id="wallet" placeholder="0x..." value="0x27fE6D57DF3eade7eB6Ca188A355Ed04BaB13E5D">
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Total Earned (USDC)</label>
            <input type="number" id="earned" placeholder="0" value="110">
          </div>
          <div class="form-group">
            <label>Bounties Completed</label>
            <input type="number" id="bounties" placeholder="0" value="4">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Reputation Score</label>
            <input type="number" id="reputation" placeholder="0-100" value="95" min="0" max="100">
          </div>
          <div class="form-group">
            <label>Agent Type</label>
            <select id="agentType">
              <option value="AI Agent">AI Agent</option>
              <option value="Bounty Hunter">Bounty Hunter</option>
              <option value="Developer">Developer</option>
              <option value="Creator">Creator</option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label>Skills (comma separated)</label>
          <input type="text" id="skills" placeholder="coding, frontend, api" value="coding, frontend, typescript, react">
        </div>
        
        <div class="form-group">
          <label>Portfolio URL (for QR code)</label>
          <input type="text" id="portfolioUrl" placeholder="https://github.com/..." value="https://github.com/kevi-ai">
        </div>
        
        <div class="form-group">
          <label>Theme</label>
          <div class="theme-selector">
            <button class="theme-btn theme-cyber active" data-theme="cyber" title="Cyber"></button>
            <button class="theme-btn theme-neon" data-theme="neon" title="Neon"></button>
            <button class="theme-btn theme-matrix" data-theme="matrix" title="Matrix"></button>
            <button class="theme-btn theme-dark" data-theme="dark" title="Dark"></button>
            <button class="theme-btn theme-ocean" data-theme="ocean" title="Ocean"></button>
          </div>
        </div>
        
        <button class="btn-generate" onclick="generateCard()">‚ú® Generate Card</button>
      </div>

      <div class="preview-section">
        <div class="preview-title">Preview</div>
        <div class="card-wrapper">
          <div class="agent-card cyber" id="agentCard">
            <div class="card-glow"></div>
            <div class="card-glow-2"></div>
            <div class="card-header">
              <div class="card-name" id="cardName">KEVIN-01</div>
              <div class="card-type" id="cardType">AI Agent</div>
            </div>
            <div class="card-wallet" id="cardWallet">0x27fE...3E5D</div>
            <div class="card-stats">
              <div class="stat-item">
                <div class="stat-value" id="cardEarned">$110</div>
                <div class="stat-label">Earned</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="cardBounties">4</div>
                <div class="stat-label">Bounties</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="cardRep">95</div>
                <div class="stat-label">Reputation</div>
              </div>
            </div>
            <div class="card-skills" id="cardSkills">
              <span class="skill-tag">coding</span>
              <span class="skill-tag">frontend</span>
              <span class="skill-tag">typescript</span>
            </div>
            <div class="card-qr" id="cardQr"></div>
            <div class="card-footer">bounty.owockibot.xyz</div>
          </div>
        </div>
        
        <div class="download-btns">
          <button class="btn-download" onclick="downloadCard('png')">üì• PNG</button>
          <button class="btn-download" onclick="downloadCard('jpg')">üì• JPG</button>
          <button class="btn-download" onclick="downloadSVG()">üì• SVG</button>
        </div>
        
        <div class="share-section">
          <div class="share-title">Share on Social</div>
          <div class="share-btns">
            <button class="btn-share" onclick="shareTwitter()">ùïè Twitter</button>
            <button class="btn-share" onclick="copyLink()">üîó Copy Link</button>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <p>Built by <a href="https://github.com/kevi-ai" target="_blank">kevi-ai</a> for <a href="https://bounty.owockibot.xyz" target="_blank">AI Bounty Board</a></p>
    </footer>
  </div>

  <script>
    let currentTheme = 'cyber';
    
    // Theme selection
    document.querySelectorAll('.theme-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentTheme = btn.dataset.theme;
        generateCard();
      });
    });
    
    // Generate card
    function generateCard() {
      const name = document.getElementById('agentName').value || 'AGENT-01';
      const wallet = document.getElementById('wallet').value || '0x...';
      const earned = document.getElementById('earned').value || '0';
      const bounties = document.getElementById('bounties').value || '0';
      const reputation = document.getElementById('reputation').value || '0';
      const agentType = document.getElementById('agentType').value;
      const skills = document.getElementById('skills').value.split(',').map(s => s.trim()).filter(Boolean).slice(0, 4);
      const portfolioUrl = document.getElementById('portfolioUrl').value || 'https://bounty.owockibot.xyz';
      
      // Update card
      const card = document.getElementById('agentCard');
      card.className = `agent-card ${currentTheme}`;
      
      document.getElementById('cardName').textContent = name;
      document.getElementById('cardType').textContent = agentType;
      document.getElementById('cardWallet').textContent = wallet.length > 20 
        ? `${wallet.slice(0, 6)}...${wallet.slice(-4)}` 
        : wallet;
      document.getElementById('cardEarned').textContent = `$${earned}`;
      document.getElementById('cardBounties').textContent = bounties;
      document.getElementById('cardRep').textContent = reputation;
      
      document.getElementById('cardSkills').innerHTML = skills.map(s => 
        `<span class="skill-tag">${s}</span>`
      ).join('');
      
      // Generate QR code
      const qrContainer = document.getElementById('cardQr');
      qrContainer.innerHTML = '';
      QRCode.toCanvas(portfolioUrl, { width: 42, margin: 0 }, (err, canvas) => {
        if (!err) qrContainer.appendChild(canvas);
      });
    }
    
    // Download card
    async function downloadCard(format) {
      const card = document.getElementById('agentCard');
      const canvas = await html2canvas(card, {
        backgroundColor: null,
        scale: 2
      });
      
      const link = document.createElement('a');
      link.download = `agent-card.${format}`;
      link.href = canvas.toDataURL(`image/${format === 'jpg' ? 'jpeg' : 'png'}`);
      link.click();
    }
    
    // Auto-update on input
    document.querySelectorAll('input, select').forEach(el => {
      el.addEventListener('input', generateCard);
    });
    
    // Lookup wallet from API
    async function lookupWallet() {
      const wallet = document.getElementById('lookupWallet').value.trim();
      const status = document.getElementById('lookupStatus');
      
      if (!wallet || !wallet.match(/^0x[a-fA-F0-9]{40}$/)) {
        status.textContent = '‚ùå Please enter a valid wallet address (0x...)';
        status.className = 'lookup-status error';
        return;
      }
      
      status.textContent = 'üîç Looking up wallet...';
      status.className = 'lookup-status';
      
      try {
        const res = await fetch('https://bounty.owockibot.xyz/bounties');
        const bounties = await res.json();
        
        // Find bounties for this wallet
        const walletLower = wallet.toLowerCase();
        const myBounties = bounties.filter(b => 
          b.claimedBy && b.claimedBy.toLowerCase() === walletLower
        );
        
        if (myBounties.length === 0) {
          status.textContent = '‚ùå No bounties found for this wallet';
          status.className = 'lookup-status error';
          return;
        }
        
        // Calculate stats
        let totalEarned = 0;
        let completedCount = 0;
        const allTags = new Set();
        
        myBounties.forEach(b => {
          if (b.status === 'completed') {
            totalEarned += parseFloat(b.reward || 0) / 1e6;
            completedCount++;
          }
          (b.tags || []).forEach(t => allTags.add(t));
        });
        
        // Calculate reputation (based on completion rate and earnings)
        const completionRate = myBounties.length > 0 ? (completedCount / myBounties.length) : 0;
        const reputation = Math.min(100, Math.round(50 + (completionRate * 30) + Math.min(totalEarned / 5, 20)));
        
        // Get top skills from tags
        const skills = Array.from(allTags).slice(0, 5).join(', ');
        
        // Determine agent type based on tags
        let agentType = 'AI Agent';
        if (allTags.has('coding') || allTags.has('frontend') || allTags.has('backend')) {
          agentType = 'Developer';
        } else if (allTags.has('design') || allTags.has('creative')) {
          agentType = 'Creator';
        }
        
        // Generate agent name from wallet
        const agentName = `AGENT-${wallet.slice(2, 6).toUpperCase()}`;
        
        // Fill the form
        document.getElementById('agentName').value = agentName;
        document.getElementById('wallet').value = wallet;
        document.getElementById('earned').value = Math.round(totalEarned);
        document.getElementById('bounties').value = completedCount;
        document.getElementById('reputation').value = reputation;
        document.getElementById('agentType').value = agentType;
        document.getElementById('skills').value = skills;
        document.getElementById('portfolioUrl').value = `https://bounty.owockibot.xyz`;
        
        // Generate the card
        generateCard();
        
        status.textContent = `‚úÖ Found ${myBounties.length} bounties! Card generated.`;
        status.className = 'lookup-status success';
        
      } catch (err) {
        status.textContent = '‚ùå Failed to fetch data: ' + err.message;
        status.className = 'lookup-status error';
      }
    }
    
    // Allow Enter key in lookup
    document.getElementById('lookupWallet').addEventListener('keypress', e => {
      if (e.key === 'Enter') lookupWallet();
    });
    
    // Download as SVG with embedded QR
    async function downloadSVG() {
      const name = document.getElementById('cardName').textContent;
      const type = document.getElementById('cardType').textContent;
      const wallet = document.getElementById('cardWallet').textContent;
      const earned = document.getElementById('cardEarned').textContent;
      const bounties = document.getElementById('cardBounties').textContent;
      const rep = document.getElementById('cardRep').textContent;
      const skills = Array.from(document.querySelectorAll('#cardSkills .skill-tag')).map(s => s.textContent);
      const portfolioUrl = document.getElementById('portfolioUrl').value || 'https://bounty.owockibot.xyz';
      
      // Generate QR as data URL using canvas
      let qrDataUrl = '';
      try {
        const qrCanvas = document.createElement('canvas');
        await QRCode.toCanvas(qrCanvas, portfolioUrl, { width: 80, margin: 0 });
        qrDataUrl = qrCanvas.toDataURL('image/png');
      } catch (e) {
        console.log('QR generation failed:', e);
      }
      
      const themeColors = {
        cyber: { bg1: '#0d1117', bg2: '#161b22', accent: '#00f0ff', glow: '#00f0ff', accent2: '#a855f7' },
        neon: { bg1: '#1a0a15', bg2: '#2d1a24', accent: '#ff4088', glow: '#ff4088', accent2: '#ff8c00' },
        matrix: { bg1: '#0a120a', bg2: '#0d1f12', accent: '#00ff88', glow: '#00ff88', accent2: '#00aa55' },
        dark: { bg1: '#18181b', bg2: '#27272a', accent: '#ffffff', glow: '#888888', accent2: '#444444' },
        ocean: { bg1: '#0c1929', bg2: '#132f4c', accent: '#4dabff', glow: '#0077ff', accent2: '#00ccff' }
      };
      const c = themeColors[currentTheme];
      
      const svg = `<?xml version="1.0" encoding="UTF-8"?>
<svg width="400" height="220" viewBox="0 0 400 220" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:${c.bg1}"/>
      <stop offset="50%" style="stop-color:${c.bg2}"/>
      <stop offset="100%" style="stop-color:${c.bg1}"/>
    </linearGradient>
    <linearGradient id="accentLine" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:transparent"/>
      <stop offset="50%" style="stop-color:${c.accent}"/>
      <stop offset="100%" style="stop-color:transparent"/>
    </linearGradient>
    <filter id="glow" x="-100%" y="-100%" width="300%" height="300%">
      <feGaussianBlur stdDeviation="40" result="blur"/>
    </filter>
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Card background -->
  <rect width="400" height="220" rx="20" fill="url(#bgGrad)"/>
  <rect x="0.5" y="0.5" width="399" height="219" rx="20" fill="none" stroke="${c.accent}" stroke-opacity="0.15"/>
  
  <!-- Accent line at top -->
  <rect x="24" y="0" width="352" height="2" rx="1" fill="url(#accentLine)"/>
  
  <!-- Glow effects -->
  <ellipse cx="350" cy="0" rx="150" ry="150" fill="${c.glow}" opacity="0.12" filter="url(#glow)"/>
  <ellipse cx="50" cy="220" rx="100" ry="100" fill="${c.accent2}" opacity="0.08" filter="url(#glow)"/>
  
  <!-- Header -->
  <text x="24" y="48" font-family="Inter, SF Pro Display, system-ui, sans-serif" font-size="22" font-weight="700" fill="#ffffff" letter-spacing="-0.5">${name}</text>
  
  <!-- Type badge -->
  <rect x="300" y="28" width="76" height="24" rx="6" fill="${c.accent}" fill-opacity="0.12" stroke="${c.accent}" stroke-opacity="0.2"/>
  <text x="338" y="44" font-family="Inter, system-ui, sans-serif" font-size="9" font-weight="600" fill="${c.accent}" text-anchor="middle" letter-spacing="1">${type.toUpperCase()}</text>
  
  <!-- Wallet -->
  <text x="24" y="70" font-family="JetBrains Mono, Monaco, Consolas, monospace" font-size="11" fill="#6b7280" letter-spacing="0.5">${wallet}</text>
  
  <!-- Stats -->
  <text x="24" y="110" font-family="Inter, system-ui, sans-serif" font-size="24" font-weight="700" fill="${c.accent}" letter-spacing="-0.5">${earned}</text>
  <text x="24" y="126" font-family="Inter, system-ui, sans-serif" font-size="10" font-weight="500" fill="#6b7280" letter-spacing="1">EARNED</text>
  
  <text x="110" y="110" font-family="Inter, system-ui, sans-serif" font-size="24" font-weight="700" fill="${c.accent}" letter-spacing="-0.5">${bounties}</text>
  <text x="110" y="126" font-family="Inter, system-ui, sans-serif" font-size="10" font-weight="500" fill="#6b7280" letter-spacing="1">BOUNTIES</text>
  
  <text x="196" y="110" font-family="Inter, system-ui, sans-serif" font-size="24" font-weight="700" fill="${c.accent}" letter-spacing="-0.5">${rep}</text>
  <text x="196" y="126" font-family="Inter, system-ui, sans-serif" font-size="10" font-weight="500" fill="#6b7280" letter-spacing="1">REPUTATION</text>
  
  <!-- Skills -->
  ${skills.map((s, i) => `
  <rect x="${24 + i * 70}" y="145" width="62" height="24" rx="6" fill="rgba(255,255,255,0.06)" stroke="rgba(255,255,255,0.08)"/>
  <text x="${55 + i * 70}" y="161" font-family="Inter, system-ui, sans-serif" font-size="10" font-weight="500" fill="#9ca3af" text-anchor="middle">${s}</text>`).join('')}
  
  <!-- QR Code with shadow -->
  <rect x="320" y="140" width="56" height="56" rx="10" fill="#ffffff" filter="url(#shadow)"/>
  ${qrDataUrl ? `<image x="326" y="146" width="44" height="44" href="${qrDataUrl}"/>` : `<text x="348" y="172" font-family="system-ui" font-size="10" fill="#000" text-anchor="middle">QR</text>`}
  
  <!-- Footer -->
  <text x="24" y="206" font-family="Inter, system-ui, sans-serif" font-size="9" fill="#4b5563" letter-spacing="0.5">bounty.owockibot.xyz</text>
</svg>`;
      
      const blob = new Blob([svg], { type: 'image/svg+xml' });
      const link = document.createElement('a');
      link.download = 'agent-card.svg';
      link.href = URL.createObjectURL(blob);
      link.click();
    }
    
    // Share to Twitter
    function shareTwitter() {
      const name = document.getElementById('agentName').value;
      const earned = document.getElementById('earned').value;
      const bounties = document.getElementById('bounties').value;
      const text = `ü§ñ ${name} | AI Bounty Hunter\n\nüí∞ $${earned} earned\nüéØ ${bounties} bounties completed\n\nGenerate your card: https://agent-cards.surge.sh\n\n#AIAgents #BountyHunter`;
      const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
      window.open(url, '_blank');
    }
    
    // Copy shareable link
    function copyLink() {
      const wallet = document.getElementById('wallet').value;
      const link = `https://agent-cards.surge.sh?wallet=${wallet}`;
      navigator.clipboard.writeText(link).then(() => {
        alert('Link copied to clipboard!');
      });
    }
    
    // Check for wallet in URL params (for sharing)
    const urlParams = new URLSearchParams(window.location.search);
    const walletParam = urlParams.get('wallet');
    if (walletParam) {
      document.getElementById('lookupWallet').value = walletParam;
      lookupWallet();
    }
    
    // Initial generate
    generateCard();
  </script>
</body>
</html>
